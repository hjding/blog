#802帧格式
[TOC]

##mac地址
MAC地址也就是物理地址，大小为48位，6个字节，前24位是厂商代码，后24位为序号，比如H3C厂商代码为00-0f-e2。
- 单播地址：第一个字节最低位为0，如 00-0f-e2-00-00-06
- 多播地址：第一个字节最低位为1，如 01-0f-e2-00-00-06
- 广播地址：48位全为1，如ff-ff-ff-ff-ff-ff


##以太帧
| 目的地址 | 源地址 |类型|数据|CRC|
|--------|--------|
|   6     |    6    |2|46~1500|4|

| 目的地址 | 源地址 |类型<br>0800|ip数据|CRC|
|--------|--------|
|   6     |    6    |2|46~1500|4|

| 目的地址 | 源地址 |类型<br>0806|arp数据|PAD|CRC|
|--------|--------|
|   6     |    6    |2|28|18|4|

| 目的地址 | 源地址 |类型<br>0835|rarp数据|PAD|CRC|
|--------|--------|
|   6     |    6    |2|28|18|4|


##802.3帧
| 目的地址 | 源地址 |长度|DASP<br>AA|SSAP<br>AA|cntl<br>03|org code<br>00|类型|数据|CRC|
|--------|--------|
|   6     |    6    |2|1|1|1|3|2|38~1492|4|

| 目的地址 | 源地址 |长度|DASP<br>AA|SSAP<br>AA|cntl<br>03|org code<br>00|类型<br>0800|ip数据|CRC|
|--------|--------|
|   6     |    6    |2|1|1|1|3|2|38~1492|4|

| 目的地址 | 源地址 |长度|DASP<br>AA|SSAP<br>AA|cntl<br>03|org code<br>00|类型<br>0806|arp数据|PAD|CRC|
|--------|--------|
|   6     |    6    |2|1|1|1|3|2|28|10|4|

| 目的地址 | 源地址 |长度|DASP<br>AA|SSAP<br>AA|cntl<br>03|org code<br>00|类型<br>0806|rarp数据|PAD|CRC|
|--------|--------|
|   6     |    6    |2|1|1|1|3|2|28|10|4|


##vlan协议格式
| TPID | Priority | CFI|vlan id|
|--------|--------|
|  协议标志，通常0x8100表示802.1q | 优先级 |规范指示位，总设为0|vlan号|
|16|3|1|12|


| vlan基于端口划分 | 收发规则|
|--------|--------|
| access |  收到一个报文，判断是否有VLAN信息：如果没有则打上端口的PVID，并进行交换转发，如果有则直接丢弃（缺省）<br>将报文的VLAN信息剥离，直接发送出去
|trunk|收到一个报文，判断是否有VLAN信息：如果没有则打上端口的PVID，并进行交换转发，如果有判断该trunk端口是否允许该VLAN的数据进入：如果可以则转发，否则丢弃 <br>比较端口的PVID和将要发送报文的VLAN信息，如果两者相等则剥离VLAN信息，再发送，如果不相等则直接发送
|hybrid| 收到一个报文，判断是否有VLAN信息，如果没有则打上端口的PVID，并进行交换转发，如果有则判断该hybrid端口是否允许该VLAN的数据进入；如果可以则转发，否则丢弃（此时端口上的untag配置是不用考虑的，untag配置只对发送报文时起作用）<br> 1.判断该VLAN在本端口的属性（disp interface 即可看到该端口对哪些VLAN是untag， 哪些VLAN是tag）；2.如果是untag则剥离VLAN信息，再发送，如果是tag则直接发送
